{% extends "base.html" %}

{% block content %}

<div class="dashboard-container fade-up">

    <!-- HEADER -->
    <div class="dashboard-header mb-5 text-center">
        <h2 class="mb-1">Your Trips</h2>
        <p class="text-muted">
            Manage your bookings and view trip details
        </p>
    </div>

    {% if bookings|length == 0 %}

        <!-- EMPTY STATE -->
        <div class="d-flex justify-content-center">
            <div class="card empty-state-card text-center p-5">

                <div class="empty-icon mb-3">✈️</div>

                <h4 class="mb-2">No trips yet</h4>

                <p class="text-muted mb-4">
                    You have not booked any trips yet.<br>
                    Start exploring to plan your next journey.
                </p>

                <a href="{{ url_for('index') }}"
                   class="btn btn-primary px-5 py-2 rounded-pill">
                    Search Trips
                </a>

            </div>
        </div>

    {% else %}

        <!-- BOOKINGS GRID -->
        <div class="row">
            {% for b in bookings %}
            <div class="col-md-6 col-lg-4 mb-4">
                <div class="card h-100 shadow-sm hover-card">

                    <div class="card-body d-flex flex-column">

                        <!-- ROUTE -->
                        <h5 class="fw-bold mb-1">
                            {{ b.source }} → {{ b.destination }}
                        </h5>

                        <!-- META -->
                        <p class="text-muted mb-2">
                            {{ b.mode }} • {{ b.provider }}
                        </p>

                        <!-- PRICE -->
                        <h6 class="mb-3">₹{{ b.price }}</h6>

                        <!-- STATUS -->
                        <span class="badge bg-success align-self-start mb-3">
                            {{ b.status }}
                        </span>

                        <!-- ACTIONS -->
                        <div class="mt-auto d-flex justify-content-between">
                            <a href="{{ url_for('booking_details', booking_id=b.booking_id) }}"
                               class="btn btn-outline-primary btn-sm">
                                View
                            </a>

                            {% if b.status == 'CONFIRMED' %}
                            <a href="{{ url_for('cancel', booking_id=b.booking_id) }}"
                               class="btn btn-outline-danger btn-sm">
                                Cancel
                            </a>
                            {% endif %}
                        </div>

                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

    {% endif %}

</div>

{% endblock %}
